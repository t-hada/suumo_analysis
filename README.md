# 🏠 SUUMO 物件データ分析 & コスパ駅特定ツール

このプロジェクトは、SUUMOから賃貸物件情報をスクレイピングし、**「特定の駅（例：東京駅）までの所要時間」に対する「家賃の割安度（コスパ）」**を統計的に分析・可視化するためのツールです。

## 🌟 特徴

- **自動スクレイピング**: SUUMOの検索結果から物件名、家賃、住所、最寄り駅、築年数、面積などを一括取得。
- **電車所要時間の自動取得**: Yahoo!乗換案内から「ターゲット駅（デフォルト：東京駅）」までの所要時間と乗り換え回数を自動取得。
- **データクリーニング**: 「万円」と「円」の混在、徒歩分数の抽出、築年数の数値化などを自動処理。
- **統計的コスパ分析**:
    - **相場乖離モデル**: 移動時間と家賃の相関関係を回帰分析し、トレンドラインより安い「掘り出し駅」を特定。
    - **タイパ分析**: 1分の移動時間を短縮するために払っている家賃コストを算出。
- **インタラクティブな可視化**: `marimo` ノートブックを使用して、プルダウンからCSVを選択し、散布図やランキングをグラフで閲覧。

## 📂 ディレクトリ構成

```text
.
├── main.py              # データ収集・整形のメイン実行ファイル
├── data/                # CSVデータ（生データ、駅所要時間、最終成果物）
├── src/                 # モジュール（scraper, cleaner, station_info, analyzer, visualizer）
├── notebook/            # 分析用ノートブック (marimo)
└── pyproject.toml       # 依存関係管理 (uv)
```

## 🚀 使い方

### 1. セットアップ
[uv](https://github.com/astral-sh/uv) を使用して依存関係をインストールします。

```bash
uv sync
```

### 2. データの収集と整形
`main.py` を実行して、SUUMOからデータを取得し、所要時間を紐付けたCSVを生成します。

```bash
uv run main.py
```
※ `data/{name}.csv` に最終的な分析用データが保存されます。

### 3. 分析と可視化
`marimo` を起動して、ブラウザ上でデータを分析します。

```bash
marimo edit notebook/notebook.py
```

## 📊 分析指標の解説

### コスパ最強駅 (Bargain Amount)
「同じ移動時間の駅たち」の平均家賃と比較して、実際の家賃がどれだけ安いかを計算しています。
- **プラスの値**: 相場より安く住める「お買い得な駅」
- **マイナスの値**: 利便性や人気により、相場より家賃が高い駅

## ⚠️ 注意事項
- 本ツールは個人利用を目的としています。
- スクレイピングを実行する際は、サーバーへの負荷を考慮し、適切な間隔（`time.sleep`）を空けて実行してください。
- ターゲット駅を変更する場合は、`src/station_info.py` の `to_station` 引数を修正してください。
